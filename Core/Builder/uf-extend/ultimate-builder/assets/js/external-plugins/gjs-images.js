/*! gjs-images - 1.1.64 */
!function(e,t){'object'==typeof exports&&'object'==typeof module?module.exports=t():'function'==typeof define&&define.amd?define([],t):'object'==typeof exports?exports["gjs-images"]=t():e["gjs-images"]=t()}(Object('undefined'!=typeof globalThis?globalThis:'undefined'!=typeof window?window:this),()=>(()=>{"use strict";var e={d:(t,o)=>{for(var n in o)e.o(o,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:o[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{'undefined'!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:'Module'}),Object.defineProperty(e,'__esModule',{value:!0})}},t={};function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function n(e){var t=function(e,t){if("object"!=o(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=o(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==o(t)?t:t+""}function i(e,t,o){return(t=n(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}e.r(t),e.d(t,{default:()=>O});const a=function(e){const t=e.DomComponents,o='figure';t.addType(o,{isComponent:e=>e.tagName&&e.tagName.toLowerCase()===o,model:{defaults:{name:'Figure',tagName:'figure',classes:[o,'component'],components:[{type:'image2'},{type:'figcaption'}],styles:"\n                    figure {\n                        margin: 0;\n                        display: block;\n                    }\n                "}}})},r=(e,t,o,n,i)=>t.map(t=>({type:'button',label:t.charAt(0).toUpperCase()+t.slice(1),class:()=>t===e.getStyle(o)?'active':'',command:'set-image-property',args:{property:o,value:t}})).reduce((e,t,o)=>{if(e.push(t),(o+1)%n===0){let t=o+1===n?'toggle':'break';e.push({type:t})}return e},[]),l=[{name:'blur',default:0,unit:'px',max:100},{name:'brightness',default:100,unit:'%',max:200},{name:'contrast',default:100,unit:'%',max:200},{name:'grayscale',default:0,unit:'%',max:100},{name:'hue-rotate',default:0,unit:'deg',max:360},{name:'invert',default:0,unit:'%',max:100},{name:'saturate',default:100,unit:'%',max:200},{name:'sepia',default:0,unit:'%',max:100},{name:'opacity',default:100,unit:'%',max:100}],s=e=>{const t=l.map(t=>({type:'range',max:t.max,rerender:!1,title:{label:t.name.toUpperCase(),position:'left'},command:'set-image-property',args:{property:t.name,unit:t.unit},value:()=>{let o=e.getStyle('filter'),n={};return o&&'string'==typeof o&&o.split(' ').forEach(e=>{let t=e.split('(');n[t[0]]='('+t[1]}),t.name in n?(e=>{const t=e.match(/(\d+)/);if(t&&t[0])return parseInt(t[0],10);return null})(n[t.name]):t.default}})),o=6,n=t.reduce((e,t,n)=>(e.push(t),e.push({type:'break'}),(n+1)%o===0&&n+1===o&&e.push({type:'toggle'}),e),[]);return n.push({type:'button',label:'Clean all filters',command:'clean-filters',rerender:{partial:!0}}),n},p=function(e){e.DomComponents.addType('image2',{isComponent:e=>e.classList&&e.classList.contains('image2'),extend:'image',extendFnView:['onActive'],model:{defaults:{name:'Image',delegate:{remove:e=>e.closestType('figure'),move:e=>e.closestType('figure'),copy:e=>e.closestType('figure')},attributes:{class:'image2'},styles:"\n                    .image2 {\n                        max-width: 100%;\n                        height: auto;\n                        object-fit: contain;\n                    }\n                ",contextMenu:function(e){return(e=>[{type:'options',gap:30,options:[{type:'options',class:'column',options:[{type:'options',options:[{type:'button',label:'Set image',command:void 0!==window.wp?'open-datastore':'set-image'},{type:'button',label:'Reset size',command:'reset-image-size'}]},{type:'options',title:'OBJECT FIT',options:r(e,['contain','cover','fill','none'],'object-fit',2)},{type:'options',title:'OBJECT POSITION',options:r(e,['left','center','right','top','bottom'],'object-position',3)},{type:'options',title:'MIX BLEND MODE',options:r(e,['normal','multiply','screen','overlay','darken','lighten','color-dodge','color-burn','difference','exclusion','hue','saturation','color','luminosity'],'mix-blend-mode',3)},{type:'color',value:()=>e.getStyle('background-color')||'',title:'BACKGROUND COLOR',command:'set-image-property',args:{property:'background-color'}}]},{type:'options',class:'column',options:[{type:'options',title:'FILTER',options:s(e)}]}]}])(e)}}},view:{onRender(t){let{el:o,model:n}=t;if(null!=window.wp){const t=n,o=n.closestType('figure'),i=e.getConfig().temporalCompStore||{},a=t.get('__tempID');if(a&&i[a]){const e=i[a].datastore;let t='';if('selfhosted'==(e.get('image_source')||'selfhosted')){const o=e.get('image_prepared')||{};Array.isArray(o)&&o.length>0&&(t=o[0].caption||'')}else t=(null==e?void 0:e.get('credits'))||'';setTimeout(()=>{const e=null==o?void 0:o.findType('figcaption')[0];e&&(e.getEl().innerText=t)},100);const r=(null==e?void 0:e.get('aspect_ratio'))||'default';if('default'!=r)if(n.addStyle({height:''}),'custom'!=r)n.addStyle({'aspect-ratio':r});else{const t=null==e?void 0:e.get('custom_aspect_ratio');t&&n.addStyle({'aspect-ratio':t})}}}},onActive(t){null==t||t.stopPropagation();const{em:o,model:n}=this;if(null==window.wp){console.log('Using default Asset Manager');const t=e.AssetManager;t&&n.get('editable')&&t.open({select(e,o){n.set({src:e.getSrc()}),o&&t.close()},target:n,types:['image'],accept:'image/*'})}},updateSrc(){const{model:t,classEmpty:o,$el:n}=this;let i=!1,a='';if(null!=window.wp){const o=e.getConfig().temporalCompStore||{},n=t.get('__tempID');if(n&&o[n]){const e=o[n].popupDatastore||o[n].datastore;if('selfhosted'==(e.get('image_source')||'selfhosted')){const t=e.get('image_prepared')||{};Array.isArray(t)&&t.length>0&&(a=t[0].url||'')}else a=e.get('external_image')||''}}else a=t.getSrcResult();i=a&&!t.isDefaultSrc(),t.addAttributes({src:a}),n[i?'removeClass':'addClass'](o)}}})},c=function(e){e.DomComponents.addType('figcaption',{isComponent:e=>e.tagName&&'figcaption'===e.tagName.toLowerCase(),model:{defaults:{name:'Figcaption',draggable:!1,delegate:{select:e=>e.closestType('figure').findType('image2')[0]},tagName:'figcaption',styles:"\n                    figcaption {\n                        margin: 0;\n                        display: block;\n                        text-align: center;\n                        font-size: 0.9em;\n                    }\n                "}}})},d=e=>{e.add('set-image-property',function(e,t){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=o.component;if('image2'==n.attributes.type){let e,t;if(l.map(e=>e.name).includes(o.property)){e='filter';let i,a=n.getStyle('filter'),r={};a&&'string'==typeof a&&a.split(' ').forEach(e=>{let t=e.split('(');r[t[0]]='('+t[1]});for(const e of l)if(e.name===o.property){i=e.default;break}parseInt(o.value)===parseInt(i)?delete r[o.property]:r[o.property]='('+o.value+o.unit+')';let s=[];for(const e in r)s.push(e+r[e]);e='filter',t=s.join(' ')}else{const i=n.getStyle(o.property);e=o.property,t=i!=o.value?o.value:''}n.addStyle({[e]:t})}})},m=e=>{e.add('reset-image-size',function(e,t){let o=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).component;'image2'==o.attributes.type&&o.addStyle({width:'',height:''})})},u=e=>{e.add('clean-filters',function(e,t){let o=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).component;'image2'==o.attributes.type&&o.addStyle({filter:''})})},g=e=>{e.add('set-image',function(e,t){let o=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).component;'image2'==o.attributes.type&&void 0===window.wp&&o.getView().onActive()})},f=e=>{e.on('component:selected',t=>{'image2'==t.attributes.type&&e.StyleManager.addSector('image-properties',{name:'Image Properties',open:!1,properties:[{type:'select',label:'Object Fit',property:'object-fit',default:'contain',options:[{id:'contain'},{id:'cover'},{id:'fill'},{id:'none'}]},{type:'select',label:'Object Position',property:'object-position',default:'center',options:[{id:'left'},{id:'center'},{id:'right'},{id:'top'},{id:'bottom'}]},{type:'select',label:'Mix Blend Mode',property:'mix-blend-mode',default:'normal',options:[{id:'normal'},{id:'multiply'},{id:'screen'},{id:'overlay'},{id:'darken'},{id:'lighten'},{id:'color-dodge'},{id:'color-burn'},{id:'difference'},{id:'exclusion'},{id:'hue'},{id:'saturation'},{id:'color'},{id:'luminosity'}]}]},{at:0})})},y=e=>{e.on('component:deselected',t=>{'image2'==t.attributes.type&&e.StyleManager.removeSector('image-properties')})},b=['.image2'],h=e=>{e.on('selector:add',e=>b.indexOf(e.getFullName())>=0&&e.set('private',1))},v={'gjs-images':{}};function w(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),o.push.apply(o,n)}return o}function S(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?w(Object(o),!0).forEach(function(t){i(e,t,o[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):w(Object(o)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))})}return e}const O=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const o=S(S({},{i18n:{}}),t);!function(e){[p,c,a].map(t=>t(e))}(e),void 0===window.wp&&function(e){e.BlockManager.add('Image',{label:'Image',category:'Basic',content:{type:'figure'},media:null!=window.wp?'<i class="dashicons dashicons-format-image"></i>':"<svg xmlns=\"http://www.w3.org/2000/svg\" height=\"30\" width=\"30\"><path d=\"M15.1,2.2c4.2,0,8.4,0,12.6,0c1.7,0,2.3,0.7,2.3,2.3c0,7,0,14,0,21c0,1.7-0.7,2.3-2.3,2.3c-8.4,0-16.9,0-25.3,0c-1.7,0-2.3-0.7-2.3-2.3c0-7,0-14,0-21c0-1.7,0.7-2.3,2.3-2.3C6.6,2.2,10.8,2.2,15.1,2.2z M2.1,22.5c0.3-0.3,0.4-0.4,0.5-0.5c2.5-3,5-6,7.5-9c1.2-1.5,1.9-1.5,3.2,0c1,1.1,2,2.2,3,3.2c0.8,0.8,1.3,0.8,2.2,0.1c0.3-0.3,0.6-0.5,1-0.8c0.8-0.6,1.2-0.6,1.9,0.2c0.8,0.8,1.5,1.6,2.3,2.4c1.4,1.5,2.7,2.9,4.1,4.4c0.1-0.2,0.1-0.3,0.1-0.3c0-5.6,0-11.2,0-16.8c0-0.8-0.5-1-1.2-1c-7.8,0-15.5,0-23.3,0c-1,0-1.2,0.3-1.2,1.2c0,1.4,0,2.9,0,4.3C2.1,14,2.1,18.1,2.1,22.5z\"/><path d=\"M25,12.1c-2.4,0-4.2-1.8-4.2-4.2s1.8-4.2,4.2-4.2c2.4,0,4.2,1.8,4.2,4.2C29.2,10.3,27.4,12.1,25,12.1z\"/></svg>"})}(e),e.I18n&&e.I18n.addMessages(S({en:v},o.i18n)),(e=>{[f,y,h].map(t=>t(e))})(e),(e=>{const t=e.Commands;[d,m,u,g].map(e=>e(t))})(e)};return t})());
//# sourceMappingURL=index.js.map