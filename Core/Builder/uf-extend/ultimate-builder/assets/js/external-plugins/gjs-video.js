/*! gjs-video - 1.0.3 */
!function(e,t){'object'==typeof exports&&'object'==typeof module?module.exports=t():'function'==typeof define&&define.amd?define([],t):'object'==typeof exports?exports["gjs-video"]=t():e["gjs-video"]=t()}('undefined'!=typeof globalThis?globalThis:'undefined'!=typeof window?window:this,()=>(()=>{"use strict";var e={d:(t,o)=>{for(var n in o)e.o(o,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:o[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{'undefined'!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:'Module'}),Object.defineProperty(e,'__esModule',{value:!0})}},t={};function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function n(e){var t=function(e,t){if("object"!=o(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==o(t)?t:t+""}function r(e,t,o){return(t=n(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}e.r(t),e.d(t,{default:()=>h});const i=(e,t,o,n,r)=>t.map(t=>({type:'button',label:t.charAt(0).toUpperCase()+t.slice(1),class:()=>t===e.getStyle(o)?'active':'',command:'video:set-property',args:{property:o,value:t}})).reduce((e,t,o)=>{if(e.push(t),(o+1)%n===0){let t=o+1===n?'toggle':'break';e.push({type:t})}return e},[]),l=[{name:'blur',default:0,unit:'px',max:100},{name:'brightness',default:100,unit:'%',max:200},{name:'contrast',default:100,unit:'%',max:200},{name:'grayscale',default:0,unit:'%',max:100},{name:'hue-rotate',default:0,unit:'deg',max:360},{name:'invert',default:0,unit:'%',max:100},{name:'saturate',default:100,unit:'%',max:200},{name:'sepia',default:0,unit:'%',max:100},{name:'opacity',default:100,unit:'%',max:100}],a=e=>{const t=l.map(t=>({type:'range',max:t.max,rerender:!1,title:{label:t.name.toUpperCase(),position:'left'},command:'set-image-property',args:{property:t.name,unit:t.unit},value:()=>{let o=e.getStyle('filter'),n={};return o&&'string'==typeof o&&o.split(' ').forEach(e=>{let t=e.split('(');n[t[0]]='('+t[1]}),t.name in n?(e=>{const t=e.match(/(\d+)/);if(t&&t[0])return parseInt(t[0],10);return null})(n[t.name]):t.default}})),o=6,n=t.reduce((e,t,n)=>(e.push(t),e.push({type:'break'}),(n+1)%o===0&&n+1===o&&e.push({type:'toggle'}),e),[]);return n.push({type:'button',label:'Clean all filters',command:'video:clean-filters',rerender:{partial:!0}}),n},s=new Map,c=100;function p(){if(s.size>=c){const e=Array.from(s.keys()).slice(0,10);e.forEach(e=>s.delete(e)),console.log('Cache cleanup: removed',e.length,'old entries')}}const d=function(e){const t=e.DomComponents,o='video2';t.addType(o,{isComponent:e=>e.classList&&e.classList.contains(o),model:{defaults:{name:'Video',resizable:!0,classes:[o,'component'],classEmpty:'gjs-plh-video',styles:"\n                    .video2 iframe, .video2 video {\n\t\t\t\t\t\tpointer-events: none;\n\t\t\t\t\t\twidth: 100%;\n\t\t\t\t\t\theight: 100%;\n\t\t\t\t\t\taspect-ratio: var(--aspect-ratio, 16 / 9);\n\t\t\t\t\t}\n\t\t\t\t\t.gjs-plh-video {\n\t\t\t\t\t    background: #f5f5f5 url(data:image/svg+xml,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3C!--%20License%3A%20CC0%20License.%20Made%20by%20SVG%20Repo%3A%20https%3A%2F%2Fwww.svgrepo.com%2Fsvg%2F423303%2Fvideo%20--%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20%20width%3D%22800px%22%20height%3D%22800px%22%20viewBox%3D%220%200%2060%2060%22%20enable-background%3D%22new%200%200%2060%2060%22%20xml%3Aspace%3D%22preserve%22%3E%3Cg%20id%3D%22XMLID_1_%22%3E%3Cg%3E%3Cpolygon%20fill%3D%22%23555555%22%20points%3D%2234.305%2C22.889%2025.708%2C27.876%2025.708%2C17.902%20%22%2F%3E%3Crect%20x%3D%221.693%22%20y%3D%2244.797%22%20fill%3D%22%23CCCCCC%22%20width%3D%2256.615%22%20height%3D%2213.921%22%2F%3E%3C%2Fg%3E%3Cg%3E%3Cpolygon%20fill%3D%22none%22%20stroke%3D%22%23555555%22%20stroke-width%3D%223%22%20stroke-linecap%3D%22round%22%20stroke-linejoin%3D%22round%22%20stroke-miterlimit%3D%2210%22%20points%3D%2258.307%2C44.797%2058.307%2C58.719%201.693%2C58.719%201.693%2C44.797%201.693%2C1.833%2058.307%2C1.833%20%22%2F%3E%3Cline%20fill%3D%22none%22%20stroke%3D%22%23555555%22%20stroke-width%3D%223%22%20stroke-linecap%3D%22round%22%20stroke-linejoin%3D%22round%22%20stroke-miterlimit%3D%2210%22%20x1%3D%221.693%22%20y1%3D%2244.797%22%20x2%3D%2258.307%22%20y2%3D%2244.797%22%2F%3E%3Cpolygon%20fill%3D%22none%22%20stroke%3D%22%23555555%22%20stroke-width%3D%223%22%20stroke-linecap%3D%22round%22%20stroke-linejoin%3D%22round%22%20stroke-miterlimit%3D%2210%22%20points%3D%2234.305%2C22.889%2025.708%2C27.876%2025.708%2C17.902%20%22%2F%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E) center center no-repeat;\n\t\t\t\t\t\tbackground-size: 50px 50px;\n\t\t\t\t\t    border: none;\n\t\t\t\t\t\taspect-ratio: 16 / 9;\n\t\t\t\t\t    width: 100%;\n\t\t\t\t\t    display: block;\n\t\t\t\t\t    outline: 3px solid #ffca6f;\n\t\t\t\t\t    cursor: pointer;\n\t\t\t\t\t    outline-offset: -2px;\n\t\t\t\t\t}\n                ",contextMenu:function(e){return(e=>[{type:'options',gap:30,options:[{type:'options',class:'column',options:[{type:'options',options:[{type:'button',label:'Reset size',command:'video:reset-size'}]},{type:'options',title:'MIX BLEND MODE',options:i(e,['normal','multiply','screen','overlay','darken','lighten','color-dodge','color-burn','difference','exclusion','hue','saturation','color','luminosity'],'mix-blend-mode',3)},{type:'color',value:()=>e.getStyle('background-color')||'',title:'BACKGROUND COLOR',command:'video:set-property',args:{property:'background-color'}}]},{type:'options',class:'column',options:[{type:'options',title:'FILTER',options:a(e)}]}]}])(e)}}},view:{onRender(t){let{el:o,model:n}=t;const{$el:r}=this,i=n.get('classEmpty');if(null!=window.wp){const t=e.getConfig().temporalCompStore||{},l=n.get('__tempID');if(l&&t[l]){const e=t[l].datastore,a=e.get('video_source')||'selfhosted';let c=!1;if('selfhosted'==a){const t=e.get('video_prepared')||{};if(Array.isArray(t)&&t.length>0){const e=t[0].url||'';e&&(o.innerHTML="<video src=\"".concat(e,"\" controls></video>"),c=!0)}}else{const t=e.get('external_url_embed_code')||'';t&&(o.innerHTML=t,c=!0)}if(!c&&'external'==a){const n=e.get('external_url')||'';n&&function(e,t,o,n){return new Promise(r=>{if(s.has(t)){const o=s.get(t);console.log('Using cached embed code for:',t),e.innerHTML=o,r(!0)}else{const i=o[n],l=i.get('fields').models[3].get('name'),a=i.get('fields').models[3].get('nonce');jQuery.ajax({url:window.location.href,type:'post',dataType:'json',data:{uf_action:'get_embed_'+l,embed_url:t,nonce:a},success:function(o){const n=o.code||'';n&&(p(),s.set(t,n)),e.innerHTML=n,r(!0)},error:function(){const o="<iframe src=\"".concat(t,"\" frameborder=\"0\" allowfullscreen></iframe>");p(),s.set(t,o),e.innerHTML=o,r(!0)}})}})}(o,n,t,l).then(e=>{e&&r.removeClass(i)})}('external'!==a||'external'===a&&e.get('external_url_embed_code'))&&r[c?'removeClass':'addClass'](i);const d=(null==e?void 0:e.get('aspect_ratio'))||'default';if('default'!=d)if(n.addStyle({height:''}),'custom'!=d)n.addStyle({'--aspect-ratio':d});else{const t=null==e?void 0:e.get('custom_aspect_ratio');t&&n.addStyle({'--aspect-ratio':t})}const u=(null==e?void 0:e.get('video_settings'))||{},f=o.querySelector('video, iframe');u.bgc&&f&&(f.style.backgroundColor=u.bgc),u.opacity&&f&&(f.style.opacity=u.opacity/100)}}else{const e='<iframe title="HeÌctor Lavoe - Soy Vagabundo (Audio Oficial)" width="750" height="422" src="https://www.youtube.com/embed/8manuKIbuc0?feature=oembed" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>';o.innerHTML=e,r.removeClass(i)}}}})},u=e=>{e.add('video:set-property',function(e,t){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=o.component;if('video2'==n.attributes.type){let e,t;if(l.map(e=>e.name).includes(o.property)){e='filter';let r,i=n.getStyle('filter'),a={};i&&'string'==typeof i&&i.split(' ').forEach(e=>{let t=e.split('(');a[t[0]]='('+t[1]});for(const e of l)if(e.name===o.property){r=e.default;break}parseInt(o.value)===parseInt(r)?delete a[o.property]:a[o.property]='('+o.value+o.unit+')';let s=[];for(const e in a)s.push(e+a[e]);e='filter',t=s.join(' ')}else{const r=n.getStyle(o.property);e=o.property,t=r!=o.value?o.value:''}n.addStyle({[e]:t})}})},f=e=>{e.add('video:reset-size',function(e,t){let o=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).component;'video2'==o.attributes.type&&o.addStyle({width:'',height:''})})},m=e=>{e.add('video:clean-filters',function(e,t){let o=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).component;'video2'==o.attributes.type&&o.addStyle({filter:''})})},y=['.video2'],g=e=>{e.on('selector:add',e=>y.indexOf(e.getFullName())>=0&&e.set('private',1))};function b(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),o.push.apply(o,n)}return o}function v(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?b(Object(o),!0).forEach(function(t){r(e,t,o[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):b(Object(o)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))})}return e}const h=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};v(v({},{i18n:{}}),t);!function(e){[d].map(t=>t(e))}(e),void 0===window.wp&&function(e){e.BlockManager.add('Viedo',{label:'Video',category:'Basic',content:{type:'video2'},media:null!=window.wp?'<i class="dashicons dashicons-format-video"></i>':"<svg xmlns=\"http://www.w3.org/2000/svg\" height=\"30\" width=\"30\"><path d=\"M15.1,2.2c4.2,0,8.4,0,12.6,0c1.7,0,2.3,0.7,2.3,2.3c0,7,0,14,0,21c0,1.7-0.7,2.3-2.3,2.3c-8.4,0-16.9,0-25.3,0c-1.7,0-2.3-0.7-2.3-2.3c0-7,0-14,0-21c0-1.7,0.7-2.3,2.3-2.3C6.6,2.2,10.8,2.2,15.1,2.2z M2.1,22.5c0.3-0.3,0.4-0.4,0.5-0.5c2.5-3,5-6,7.5-9c1.2-1.5,1.9-1.5,3.2,0c1,1.1,2,2.2,3,3.2c0.8,0.8,1.3,0.8,2.2,0.1c0.3-0.3,0.6-0.5,1-0.8c0.8-0.6,1.2-0.6,1.9,0.2c0.8,0.8,1.5,1.6,2.3,2.4c1.4,1.5,2.7,2.9,4.1,4.4c0.1-0.2,0.1-0.3,0.1-0.3c0-5.6,0-11.2,0-16.8c0-0.8-0.5-1-1.2-1c-7.8,0-15.5,0-23.3,0c-1,0-1.2,0.3-1.2,1.2c0,1.4,0,2.9,0,4.3C2.1,14,2.1,18.1,2.1,22.5z\"/><path d=\"M25,12.1c-2.4,0-4.2-1.8-4.2-4.2s1.8-4.2,4.2-4.2c2.4,0,4.2,1.8,4.2,4.2C29.2,10.3,27.4,12.1,25,12.1z\"/></svg>"})}(e),(e=>{[g].map(t=>t(e))})(e),(e=>{const t=e.Commands;[u,f,m].map(e=>e(t))})(e)};return t})());
//# sourceMappingURL=index.js.map